{
  "metadata": {
    "sertop_args": []
  },
  "chunks": [
    "(* we'll use this library to set up ghost state later *)\nFrom iris.algebra Require Import lib.excl_auth.\nFrom iris.heap_lang Require Import proofmode notation.\nFrom iris.heap_lang.lib Require Import lock spin_lock.",
    "(* set some Coq options for basic sanity *)\nSet Default Proof Using \"Type\".\nSet Printing Projections.\nSet Default Goal Selector \"!\".\nOpen Scope Z_scope.\n\nSet Warnings \"-convert_concl_no_check\".",
    "Definition new_bank: val :=\n  \u03bb: <>,\n     let: \"a_bal\" := ref #0 in\n     let: \"b_bal\" := ref #0 in\n     let: \"lk_a\" := newlock #() in\n     let: \"lk_b\" := newlock #() in\n    (* the bank is represented as a pair of accounts, each of\n    which is a pair of a lock and a pointer to its balance *)\n     ((\"lk_a\", \"a_bal\"), (\"lk_b\", \"b_bal\")).",
    "Definition transfer: val :=\n  \u03bb: \"bank\" \"amt\",\n  let: \"a\" := Fst \"bank\" in\n  let: \"b\" := Snd \"bank\" in\n  acquire (Fst \"a\");;\n  acquire (Fst \"b\");;\n  Snd \"a\" <- !(Snd \"a\") - \"amt\";;\n  Snd \"b\" <- !(Snd \"b\") + \"amt\";;\n  release (Fst \"b\");;\n  release (Fst \"a\");;\n  #().",
    "Definition check_consistency: val :=\n  \u03bb: \"bank\",\n  let: \"a\" := Fst \"bank\" in\n  let: \"b\" := Snd \"bank\" in\n  acquire (Fst \"a\");;\n  acquire (Fst \"b\");;\n  let: \"a_bal\" := !(Snd \"a\") in\n  let: \"b_bal\" := !(Snd \"b\") in\n  let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n  release (Fst \"b\");;\n  release (Fst \"a\");;\n  \"ok\".",
    "Definition demo_check_consistency: val :=\n  \u03bb: <>,\n  let: \"bank\" := new_bank #() in\n  Fork (transfer \"bank\" #5);;\n  check_consistency \"bank\".",
    "Section heap.\n  (* you can ignore these; this mini-library is parameterized by a bunch of very\n  general things *)\n  Definition ghostR (A: ofeT) := authR (optionUR (exclR A)).\n  Context {A: ofeT} `{Hequiv: @LeibnizEquiv _ A.(ofe_equiv)} `{Hdiscrete: OfeDiscrete A}.\n  Context {\u03a3} {Hin: inG \u03a3 (authR (optionUR (exclR A)))}.",
    "Lemma ghost_var_alloc (a: A) :\n  \u22a2 |==> \u2203 \u03b3, own \u03b3 (\u25cfE a) \u2217 own \u03b3 (\u25efE a).\nProof.\n  iMod (own_alloc (\u25cfE a \u22c5 \u25efE a)) as (\u03b3) \"[H1 H2]\".\n  { apply excl_auth_valid. }\n  iModIntro. iExists \u03b3. iFrame.\nQed.",
    "Lemma ghost_var_agree \u03b3 (a1 a2: A) :\n  own \u03b3 (\u25cfE a1) -\u2217 own \u03b3 (\u25efE a2) -\u2217 \u231c a1 = a2 \u231d.\nProof using All.\n  iIntros \"H\u03b31 H\u03b32\".\n  iDestruct (own_valid_2 with \"H\u03b31 H\u03b32\") as \"H\".\n  iDestruct \"H\" as %<-%excl_auth_agree%leibniz_equiv.\n  done.\nQed.",
    "Lemma ghost_var_update {\u03b3} (a1' a1 a2 : A) :\n  own \u03b3 (\u25cfE a1) -\u2217 own \u03b3 (\u25efE a2) -\u2217\n    |==> own \u03b3 (\u25cfE a1') \u2217 own \u03b3 (\u25efE a1').\nProof.\n  iIntros \"H\u03b3\u25cf H\u03b3\u25ef\".\n  iMod (own_update_2 _ _ _ (\u25cfE a1' \u22c5 \u25efE a1')\n          with \"H\u03b3\u25cf H\u03b3\u25ef\") as \"[$$]\".\n  { apply excl_auth_update. }\n  done.\nQed.",
    "End heap.",
    "Section heap.\n\n(* mostly standard boilerplate *)\nContext `{!heapG \u03a3}.\nContext `{!lockG \u03a3}.\nContext `{!inG \u03a3 (ghostR ZO)}.\nLet N := nroot.@\"bank\".",
    "Definition account_inv \u03b3 bal_ref : iProp \u03a3 :=\n  \u2203 (bal: Z), bal_ref \u21a6 #bal \u2217 own \u03b3 (\u25efE bal).",
    "Definition is_account (acct: val) \u03b3 : iProp \u03a3 :=\n  \u2203 (bal_ref: loc) lk,\n    \u231cacct = (lk, #bal_ref)%V\u231d \u2217\n    (* you can ignore this ghost name for the lock *)\n    \u2203 (\u03b3l: gname), is_lock \u03b3l lk (account_inv \u03b3 bal_ref).",
    "Definition bank_inv (\u03b3: gname * gname) : iProp \u03a3 :=\n(* the values in the accounts are arbitrary... *)\n\u2203 (bal1 bal2: Z),\n    own \u03b3.1 (\u25cfE bal1) \u2217\n    own \u03b3.2 (\u25cfE bal2) \u2217\n    (* ... except that they add up to 0 *)\n    \u231c(bal1 + bal2)%Z = 0\u231d.",
    "Definition is_bank (b: val): iProp \u03a3 :=\n  \u2203 (acct1 acct2: val) (\u03b3: gname*gname),\n  \u231cb = (acct1, acct2)%V\u231d \u2217\n  is_account acct1 \u03b3.1 \u2217\n  is_account acct2 \u03b3.2 \u2217\n  inv N (bank_inv \u03b3).",
    "Instance is_bank_Persistent b : Persistent (is_bank b).\nProof. apply _. Qed.",
    "Theorem wp_new_bank :\n  (* This is a Hoare triple using Iris's program logic. *)\n  {{{ True }}}\n    new_bank #()\n    (* the `b,` part is a shorthand for `\u2203 b, ...` in the\n    postcondition, and RET b says the function returns b. *)\n  {{{ b, RET b; is_bank b }}}.\nProof.\n  iIntros (\u03a6) \"_ H\u03a6\".\n  wp_rec. (* unfold new_bank and runs a step of reduction *)\n  wp_alloc a_ref as \"Ha\".\n  wp_alloc b_ref as \"Hb\". (* .unfold *)",
    "  iMod (ghost_var_alloc (0: ZO)) as (\u03b31) \"(Hown1&H\u03b31)\". (* .unfold *)",
    "  wp_apply (newlock_spec (account_inv \u03b31 a_ref)\n              with \"[Ha H\u03b31]\").\n  { iExists _; iFrame. }\n  iIntros (lk_a \u03b3lk1) \"Hlk1\".\n  iMod (ghost_var_alloc (0: ZO)) as (\u03b32) \"(Hown2&H\u03b32)\".\n  wp_apply (newlock_spec (account_inv \u03b32 b_ref)\n              with \"[Hb H\u03b32]\").\n  { iExists _; iFrame. }\n  iIntros (lk_b \u03b3lk2) \"Hlk2\". (* .unfold *)",
    "Print bank_inv. (* .unfold .messages *)",
    "  iMod (inv_alloc N _ (bank_inv (\u03b31,\u03b32))\n          with \"[Hown1 Hown2]\") as \"Hinv\".\n  { iNext. iExists _, _; iFrame.\n    iPureIntro; auto. }\n  wp_pures.\n  iApply \"H\u03a6\".\n  iExists _, _, (\u03b31,\u03b32); iFrame.\n  iSplit; first eauto.\n  simpl.\n  iSplitL \"Hlk1\".\n  - iExists _; eauto with iFrame.\n  - iExists _; eauto with iFrame.\nQed.",
    "Theorem wp_transfer b (amt: Z) :\n  {{{ is_bank b }}}\n    transfer b #amt\n  {{{ RET #(); True }}}.\nProof.\n  iIntros (\u03a6) \"#Hb H\u03a6\".\n  (* Breaking apart the above definitions is really quite\n  painful. I have written better infrastructure for this but it\n  isn't upstream in Iris (yet!) *)\n  iDestruct \"Hb\" as (acct1 acct2 \u03b3 ->) \"(Hacct1&Hacct2&Hinv)\".\n  iDestruct \"Hacct1\" as (bal_ref1 lk1 ->) \"Hlk\".\n  iDestruct \"Hlk\" as (\u03b3l1) \"Hlk1\".\n  iDestruct \"Hacct2\" as (bal_ref2 lk ->) \"Hlk\".\n  iDestruct \"Hlk\" as (\u03b3l2) \"Hlk2\".\n  wp_rec.\n  wp_pures.\n  wp_apply (acquire_spec with \"Hlk1\").\n  iIntros \"(Hlocked1&Haccount1)\".\n  wp_apply (acquire_spec with \"Hlk2\").\n  iIntros \"(Hlocked2&Haccount2)\".\n  iDestruct \"Haccount1\" as (bal1) \"(Hbal1&Hown1)\".\n  iDestruct \"Haccount2\" as (bal2) \"(Hbal2&Hown2)\". (* .unfold *)",
    "(* this steps through the critical section *)\nwp_pures; wp_load; wp_pures; wp_store; wp_pures.\nwp_pures; wp_load; wp_pures; wp_store; wp_pures. (* .unfold *)",
    "rewrite -fupd_wp. (* we need to do this for iInv to work *)\niInv \"Hinv\" as (bal1' bal2') \">(H\u03b31&H\u03b32&%)\". (* .unfold *)\n(* we use the agreement and update theorems above for these\nghost variables *)\niDestruct (ghost_var_agree with \"H\u03b31 [$]\") as %->.\niDestruct (ghost_var_agree with \"H\u03b32 [$]\") as %->.\niMod (ghost_var_update (bal1-amt)\n        with \"H\u03b31 Hown1\") as \"(H\u03b31&Hown1)\".\niMod (ghost_var_update (bal2+amt)\n        with \"H\u03b32 Hown2\") as \"(H\u03b32&Hown2)\".\niModIntro.\n(* we can't just modify ghost state however we want - to\ncontinue, `iInv` added `bank_inv` to our goal to prove,\nrequiring us to restore the invariant *)\niSplitL \"H\u03b31 H\u03b32\".\n{ iNext. iExists _, _; iFrame.\n  iPureIntro.\n  lia. }\niModIntro.",
    "  wp_apply (release_spec with \"[$Hlk2 $Hlocked2 Hbal2 Hown2]\").\n  { iExists _; iFrame. }\n  iIntros \"_\".\n  wp_apply (release_spec with \"[$Hlk1 $Hlocked1 Hbal1 Hown1]\").\n  { iExists _; iFrame. }\n  iIntros \"_\".\n  wp_pures.\n  by iApply \"H\u03a6\".\nQed.",
    "Theorem wp_check_consistency b :\n  {{{ is_bank b }}}\n     check_consistency b\n  {{{ RET #true; True }}}.\nProof.\n  (* most of this proof is the same: open everything up and\n  acquire the locks, then destruct the lock invariants *)\n  iIntros (\u03a6) \"#Hb H\u03a6\".\n  iDestruct \"Hb\" as (acct1 acct2 \u03b3 ->) \"(Hacct1&Hacct2&Hinv)\".\n  iDestruct \"Hacct1\" as (bal_ref1 lk1 ->) \"Hlk\".\n  iDestruct \"Hlk\" as (\u03b3l1) \"Hlk1\".\n  iDestruct \"Hacct2\" as (bal_ref2 lk ->) \"Hlk\".\n  iDestruct \"Hlk\" as (\u03b3l2) \"Hlk2\".\n  wp_rec.\n  wp_pures.\n  wp_apply (acquire_spec with \"Hlk1\").\n  iIntros \"(Hlocked1&Haccount1)\".\n  wp_apply (acquire_spec with \"Hlk2\").\n  iIntros \"(Hlocked2&Haccount2)\".\n  iDestruct \"Haccount1\" as (bal1) \"(Hbal1&Hown1)\".\n  iDestruct \"Haccount2\" as (bal2) \"(Hbal2&Hown2)\".\n\n  (* the critical section is easy *)\n  wp_pures; wp_load.\n  wp_pures; wp_load.\n  wp_pures.\n\n  (* Now we need to prove something about our return value using\n  information derived from the invariant. As before we'll open\n  the invariant, but this time we don't need to modify anything,\n  just extract a pure fact. *)\n  rewrite -fupd_wp.\n  (* the [%] here is the pure fact, actually *)\n  iInv N as (bal1' bal2') \">(H\u03b31 & H\u03b32 & %)\".\n  iDestruct (ghost_var_agree with \"H\u03b31 [$]\") as %->.\n  iDestruct (ghost_var_agree with \"H\u03b32 [$]\") as %->.\n  iModIntro.\n  iSplitL \"H\u03b31 H\u03b32\".\n  { iNext. iExists _, _; iFrame.\n    iPureIntro.\n    lia. }\n  iModIntro.\n\n  wp_apply (release_spec with \"[$Hlk2 $Hlocked2 Hbal2 Hown2]\").\n  { iExists _; iFrame. }\n  iIntros \"_\".\n  wp_apply (release_spec with \"[$Hlk1 $Hlocked1 Hbal1 Hown1]\").\n  { iExists _; iFrame. }\n  iIntros \"_\".\n  wp_pures. (* .unfold *)\n  (* the calculation always returns true because of the H\n  hypothesis we got from the invariant *)\n  rewrite bool_decide_eq_true_2; last congruence.\n  by iApply \"H\u03a6\".\nQed.",
    "Theorem wp_demo_check_consistency :\n  {{{ True }}}\n    demo_check_consistency #()\n  {{{ RET #true; True }}}.\nProof using All.\n  iIntros (\u03a6) \"_ H\u03a6\".\n  wp_rec.\n  wp_apply wp_new_bank; first auto.\n  (* we use `#Hb` to put the newly created `is_bank` in the\n  \"persistent context\" in the Iris Proof Mode - these are\n  persistent facts and thus are available even when we need to\n  split to prove a separating conjunction *)\n  iIntros (b) \"#Hb\". (* .unfold *)",
    "  wp_apply wp_fork.\n  - wp_apply (wp_transfer with \"Hb\").\n    auto.\n  - (* `check_consistency` always returns true, assuming\n    `is_bank` *)\n    wp_apply (wp_check_consistency with \"Hb\").\n    iIntros \"_\".\n    by iApply \"H\u03a6\".\nQed.",
    "Theorem wp_fork_alt (P Q: iProp \u03a3) (e e': expr) :\n  (P -\u2217 WP e {{ \u03bb _, True }}) -\u2217\n  \u2200 (\u03a6: val \u2192 iProp \u03a3), (Q -\u2217 WP e' {{ \u03a6 }}) -\u2217\n  (P \u2217 Q -\u2217 WP Fork e;; e' {{ \u03a6 }}).\nProof.\n  iIntros \"Hwp1\" (\u03a6) \"Hwp2 (HP&HQ)\". (* .unfold *)",
    "  (* the details of the rest of this proof aren't important *)\n  wp_apply (wp_fork with \"(Hwp1 HP)\").\n  wp_apply (\"Hwp2\" with \"HQ\").\nQed.\n\nEnd heap."
  ],
  "annotated": [
    [
      {
        "_type": "text",
        "contents": "(* we'll use this library to set up ghost state later *)\n"
      },
      {
        "_type": "sentence",
        "contents": "From iris.algebra Require Import lib.excl_auth.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "From iris.heap_lang Require Import proofmode notation.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "From iris.heap_lang.lib Require Import lock spin_lock.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "text",
        "contents": "(* set some Coq options for basic sanity *)\n"
      },
      {
        "_type": "sentence",
        "contents": "Set Default Proof Using \"Type\".",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Set Printing Projections.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Set Default Goal Selector \"!\".",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Open Scope Z_scope.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n\n"
      },
      {
        "_type": "sentence",
        "contents": "Set Warnings \"-convert_concl_no_check\".",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition new_bank: val :=\n  \u03bb: <>,\n     let: \"a_bal\" := ref #0 in\n     let: \"b_bal\" := ref #0 in\n     let: \"lk_a\" := newlock #() in\n     let: \"lk_b\" := newlock #() in\n    (* the bank is represented as a pair of accounts, each of\n    which is a pair of a lock and a pointer to its balance *)\n     ((\"lk_a\", \"a_bal\"), (\"lk_b\", \"b_bal\")).",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition transfer: val :=\n  \u03bb: \"bank\" \"amt\",\n  let: \"a\" := Fst \"bank\" in\n  let: \"b\" := Snd \"bank\" in\n  acquire (Fst \"a\");;\n  acquire (Fst \"b\");;\n  Snd \"a\" <- !(Snd \"a\") - \"amt\";;\n  Snd \"b\" <- !(Snd \"b\") + \"amt\";;\n  release (Fst \"b\");;\n  release (Fst \"a\");;\n  #().",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition check_consistency: val :=\n  \u03bb: \"bank\",\n  let: \"a\" := Fst \"bank\" in\n  let: \"b\" := Snd \"bank\" in\n  acquire (Fst \"a\");;\n  acquire (Fst \"b\");;\n  let: \"a_bal\" := !(Snd \"a\") in\n  let: \"b_bal\" := !(Snd \"b\") in\n  let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n  release (Fst \"b\");;\n  release (Fst \"a\");;\n  \"ok\".",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition demo_check_consistency: val :=\n  \u03bb: <>,\n  let: \"bank\" := new_bank #() in\n  Fork (transfer \"bank\" #5);;\n  check_consistency \"bank\".",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Section heap.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n  (* you can ignore these; this mini-library is parameterized by a bunch of very\n  general things *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "Definition ghostR (A: ofeT) := authR (optionUR (exclR A)).",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "Context {A: ofeT} `{Hequiv: @LeibnizEquiv _ A.(ofe_equiv)} `{Hdiscrete: OfeDiscrete A}.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "Context {\u03a3} {Hin: inG \u03a3 (authR (optionUR (exclR A)))}.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Lemma ghost_var_alloc (a: A) :\n  \u22a2 |==> \u2203 \u03b3, own \u03b3 (\u25cfE a) \u2217 own \u03b3 (\u25efE a).",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\u22a2 |==> \u2203 \u03b3 : gname, own \u03b3 (\u25cfE a) \u2217 own \u03b3 (\u25efE a)",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\u22a2 |==> \u2203 \u03b3 : gname, own \u03b3 (\u25cfE a) \u2217 own \u03b3 (\u25efE a)",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iMod (own_alloc (\u25cfE a \u22c5 \u25efE a)) as (\u03b3) \"[H1 H2]\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\u2713 (\u25cfE a \u22c5 \u25efE a)",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H1\" : own \u03b3 (\u25cfE a)\n\"H2\" : own \u03b3 (\u25efE a)\n--------------------------------------\u2217\n|==> \u2203 \u03b30 : gname, own \u03b30 (\u25cfE a) \u2217 own \u03b30 (\u25efE a)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\u2713 (\u25cfE a \u22c5 \u25efE a)",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "apply excl_auth_valid.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H1\" : own \u03b3 (\u25cfE a)\n\"H2\" : own \u03b3 (\u25efE a)\n--------------------------------------\u2217\n|==> \u2203 \u03b30 : gname, own \u03b30 (\u25cfE a) \u2217 own \u03b30 (\u25efE a)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iModIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H1\" : own \u03b3 (\u25cfE a)\n\"H2\" : own \u03b3 (\u25efE a)\n--------------------------------------\u2217\n\u2203 \u03b30 : gname, own \u03b30 (\u25cfE a) \u2217 own \u03b30 (\u25efE a)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists \u03b3.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H1\" : own \u03b3 (\u25cfE a)\n\"H2\" : own \u03b3 (\u25efE a)\n--------------------------------------\u2217\nown \u03b3 (\u25cfE a) \u2217 own \u03b3 (\u25efE a)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Lemma ghost_var_agree \u03b3 (a1 a2: A) :\n  own \u03b3 (\u25cfE a1) -\u2217 own \u03b3 (\u25efE a2) -\u2217 \u231c a1 = a2 \u231d.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "own \u03b3 (\u25cfE a1) -\u2217 own \u03b3 (\u25efE a2) -\u2217 \u231ca1 = a2\u231d",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof using All.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "own \u03b3 (\u25cfE a1) -\u2217 own \u03b3 (\u25efE a2) -\u2217 \u231ca1 = a2\u231d",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"H\u03b31 H\u03b32\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03b31\" : own \u03b3 (\u25cfE a1)\n\"H\u03b32\" : own \u03b3 (\u25efE a2)\n--------------------------------------\u2217\n\u231ca1 = a2\u231d\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct (own_valid_2 with \"H\u03b31 H\u03b32\") as \"H\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\" : \u2713 (\u25cfE a1 \u22c5 \u25efE a2)\n--------------------------------------\u2217\n\u231ca1 = a2\u231d\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"H\" as %<-%excl_auth_agree%leibniz_equiv.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "--------------------------------------\u2217\n\u231ca1 = a1\u231d\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "done.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Lemma ghost_var_update {\u03b3} (a1' a1 a2 : A) :\n  own \u03b3 (\u25cfE a1) -\u2217 own \u03b3 (\u25efE a2) -\u2217\n    |==> own \u03b3 (\u25cfE a1') \u2217 own \u03b3 (\u25efE a1').",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "own \u03b3 (\u25cfE a1)\n-\u2217 own \u03b3 (\u25efE a2) ==\u2217 own \u03b3 (\u25cfE a1') \u2217 own \u03b3 (\u25efE a1')",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "own \u03b3 (\u25cfE a1)\n-\u2217 own \u03b3 (\u25efE a2) ==\u2217 own \u03b3 (\u25cfE a1') \u2217 own \u03b3 (\u25efE a1')",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"H\u03b3\u25cf H\u03b3\u25ef\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03b3\u25cf\" : own \u03b3 (\u25cfE a1)\n\"H\u03b3\u25ef\" : own \u03b3 (\u25efE a2)\n--------------------------------------\u2217\n|==> own \u03b3 (\u25cfE a1') \u2217 own \u03b3 (\u25efE a1')\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iMod (own_update_2 _ _ _ (\u25cfE a1' \u22c5 \u25efE a1')\n          with \"H\u03b3\u25cf H\u03b3\u25ef\") as \"[$$]\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\u25cfE a1 \u22c5 \u25efE a2 ~~> \u25cfE a1' \u22c5 \u25efE a1'",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "--------------------------------------\u2217\n|==> True\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\u25cfE a1 \u22c5 \u25efE a2 ~~> \u25cfE a1' \u22c5 \u25efE a1'",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "apply excl_auth_update.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "--------------------------------------\u2217\n|==> True\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "A"
                ],
                "body": null,
                "type": "ofeT"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hequiv"
                ],
                "body": null,
                "type": "LeibnizEquiv A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hdiscrete"
                ],
                "body": null,
                "type": "OfeDiscrete A"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "Hin"
                ],
                "body": null,
                "type": "inG \u03a3 (authR (optionUR (exclR A)))"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a1'",
                  "a1",
                  "a2"
                ],
                "body": null,
                "type": "A.(ofe_car)"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "done.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "End heap.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Section heap.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n\n(* mostly standard boilerplate *)\n"
      },
      {
        "_type": "sentence",
        "contents": "Context `{!heapG \u03a3}.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Context `{!lockG \u03a3}.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Context `{!inG \u03a3 (ghostR ZO)}.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Let N := nroot.@\"bank\".",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition account_inv \u03b3 bal_ref : iProp \u03a3 :=\n  \u2203 (bal: Z), bal_ref \u21a6 #bal \u2217 own \u03b3 (\u25efE bal).",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition is_account (acct: val) \u03b3 : iProp \u03a3 :=\n  \u2203 (bal_ref: loc) lk,\n    \u231cacct = (lk, #bal_ref)%V\u231d \u2217\n    (* you can ignore this ghost name for the lock *)\n    \u2203 (\u03b3l: gname), is_lock \u03b3l lk (account_inv \u03b3 bal_ref).",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition bank_inv (\u03b3: gname * gname) : iProp \u03a3 :=\n(* the values in the accounts are arbitrary... *)\n\u2203 (bal1 bal2: Z),\n    own \u03b3.1 (\u25cfE bal1) \u2217\n    own \u03b3.2 (\u25cfE bal2) \u2217\n    (* ... except that they add up to 0 *)\n    \u231c(bal1 + bal2)%Z = 0\u231d.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Definition is_bank (b: val): iProp \u03a3 :=\n  \u2203 (acct1 acct2: val) (\u03b3: gname*gname),\n  \u231cb = (acct1, acct2)%V\u231d \u2217\n  is_account acct1 \u03b3.1 \u2217\n  is_account acct2 \u03b3.2 \u2217\n  inv N (bank_inv \u03b3).",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Instance is_bank_Persistent b : Persistent (is_bank b).",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "Persistent (is_bank b)",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "Persistent (is_bank b)",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "apply _.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Theorem wp_new_bank :\n  (* This is a Hoare triple using Iris's program logic. *)\n  {{{ True }}}\n    new_bank #()\n    (* the `b,` part is a shorthand for `\u2203 b, ...` in the\n    postcondition, and RET b says the function returns b. *)\n  {{{ b, RET b; is_bank b }}}.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ True }}}\n  new_bank #()\n{{{ (b : val), RET b; is_bank b }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ True }}}\n  new_bank #()\n{{{ (b : val), RET b; is_bank b }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (\u03a6) \"_ H\u03a6\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u25b7 (\u2200 b : val, is_bank b -\u2217 \u03a6 b)\n--------------------------------------\u2217\nWP new_bank #() {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_rec.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n--------------------------------------\u2217\nWP let: \"a_bal\" := ref #0 in\n   let: \"b_bal\" := ref #0 in\n   let: \"lk_a\" := newlock #() in\n   let: \"lk_b\" := newlock #() in\n   (\"lk_a\", \"a_bal\", (\"lk_b\", \"b_bal\")) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* unfold new_bank and runs a step of reduction *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_alloc a_ref as \"Ha\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Ha\" : a_ref \u21a6 #0\n--------------------------------------\u2217\nWP let: \"a_bal\" := #a_ref in\n   let: \"b_bal\" := ref #0 in\n   let: \"lk_a\" := newlock #() in\n   let: \"lk_b\" := newlock #() in\n   (\"lk_a\", \"a_bal\", (\"lk_b\", \"b_bal\")) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref"
                ],
                "body": null,
                "type": "loc"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_alloc b_ref as \"Hb\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Ha\" : a_ref \u21a6 #0\n\"Hb\" : b_ref \u21a6 #0\n--------------------------------------\u2217\nWP let: \"b_bal\" := #b_ref in\n   let: \"lk_a\" := newlock #() in\n   let: \"lk_b\" := newlock #() in\n   (\"lk_a\", #a_ref, (\"lk_b\", \"b_bal\")) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "text",
        "contents": "  "
      },
      {
        "_type": "sentence",
        "contents": "iMod (ghost_var_alloc (0: ZO)) as (\u03b31) \"(Hown1&H\u03b31)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Ha\" : a_ref \u21a6 #0\n\"Hb\" : b_ref \u21a6 #0\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"H\u03b31\" : own \u03b31 (\u25efE 0)\n--------------------------------------\u2217\nWP let: \"b_bal\" := #b_ref in\n   let: \"lk_a\" := newlock #() in\n   let: \"lk_b\" := newlock #() in\n   (\"lk_a\", #a_ref, (\"lk_b\", \"b_bal\")) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "text",
        "contents": "  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (newlock_spec (account_inv \u03b31 a_ref)\n              with \"[Ha H\u03b31]\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Ha\" : a_ref \u21a6 #0\n\"H\u03b31\" : own \u03b31 (\u25efE 0)\n--------------------------------------\u2217\naccount_inv \u03b31 a_ref\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hb\" : b_ref \u21a6 #0\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n--------------------------------------\u2217\n\u2200 (lk : val) (\u03b3 : gname),\n  is_lock \u03b3 lk (account_inv \u03b31 a_ref)\n  -\u2217 WP let: \"lk_a\" := lk in\n        let: \"lk_b\" := newlock #() in\n        (\"lk_a\", #a_ref, (\"lk_b\", #b_ref))\n     {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Ha\" : a_ref \u21a6 #0\n\"H\u03b31\" : own \u03b31 (\u25efE 0)\n--------------------------------------\u2217\naccount_inv \u03b31 a_ref\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hb\" : b_ref \u21a6 #0\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n--------------------------------------\u2217\n\u2200 (lk : val) (\u03b3 : gname),\n  is_lock \u03b3 lk (account_inv \u03b31 a_ref)\n  -\u2217 WP let: \"lk_a\" := lk in\n        let: \"lk_b\" := newlock #() in\n        (\"lk_a\", #a_ref, (\"lk_b\", #b_ref))\n     {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (lk_a \u03b3lk1) \"Hlk1\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hb\" : b_ref \u21a6 #0\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n--------------------------------------\u2217\nWP let: \"lk_a\" := lk_a in\n   let: \"lk_b\" := newlock #() in\n   (\"lk_a\", #a_ref, (\"lk_b\", #b_ref)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iMod (ghost_var_alloc (0: ZO)) as (\u03b32) \"(Hown2&H\u03b32)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hb\" : b_ref \u21a6 #0\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n\"H\u03b32\" : own \u03b32 (\u25efE 0)\n--------------------------------------\u2217\nWP let: \"lk_a\" := lk_a in\n   let: \"lk_b\" := newlock #() in\n   (\"lk_a\", #a_ref, (\"lk_b\", #b_ref)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (newlock_spec (account_inv \u03b32 b_ref)\n              with \"[Hb H\u03b32]\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : b_ref \u21a6 #0\n\"H\u03b32\" : own \u03b32 (\u25efE 0)\n--------------------------------------\u2217\naccount_inv \u03b32 b_ref\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n--------------------------------------\u2217\n\u2200 (lk : val) (\u03b3 : gname),\n  is_lock \u03b3 lk (account_inv \u03b32 b_ref)\n  -\u2217 WP let: \"lk_b\" := lk in\n        (lk_a, #a_ref, (\"lk_b\", #b_ref)) \n     {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : b_ref \u21a6 #0\n\"H\u03b32\" : own \u03b32 (\u25efE 0)\n--------------------------------------\u2217\naccount_inv \u03b32 b_ref\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n--------------------------------------\u2217\n\u2200 (lk : val) (\u03b3 : gname),\n  is_lock \u03b3 lk (account_inv \u03b32 b_ref)\n  -\u2217 WP let: \"lk_b\" := lk in\n        (lk_a, #a_ref, (\"lk_b\", #b_ref)) \n     {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (lk_b \u03b3lk2) \"Hlk2\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\nWP let: \"lk_b\" := lk_b in\n   (lk_a, #a_ref, (\"lk_b\", #b_ref)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Print bank_inv.",
        "responses": [
          "bank_inv = \n\u03bb \u03b3 : gname * gname,\n  (\u2203 bal1 bal2 : Z,\n     own \u03b3.1 (\u25cfE bal1)\n     \u2217 own \u03b3.2 (\u25cfE bal2) \u2217 \u231c(bal1 + bal2)%Z = 0\u231d)%I\n     : gname * gname \u2192 iProp \u03a3"
        ],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\nWP let: \"lk_b\" := lk_b in\n   (lk_a, #a_ref, (\"lk_b\", #b_ref)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold .messages *)"
      }
    ],
    [
      {
        "_type": "text",
        "contents": "  "
      },
      {
        "_type": "sentence",
        "contents": "iMod (inv_alloc N _ (bank_inv (\u03b31,\u03b32))\n          with \"[Hown1 Hown2]\") as \"Hinv\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n--------------------------------------\u2217\n\u25b7 bank_inv (\u03b31, \u03b32)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n\"Hinv\" : inv N (bank_inv (\u03b31, \u03b32))\n--------------------------------------\u2217\nWP let: \"lk_b\" := lk_b in\n   (lk_a, #a_ref, (\"lk_b\", #b_ref)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n--------------------------------------\u2217\n\u25b7 bank_inv (\u03b31, \u03b32)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iNext.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hown1\" : own \u03b31 (\u25cfE 0)\n\"Hown2\" : own \u03b32 (\u25cfE 0)\n--------------------------------------\u2217\nbank_inv (\u03b31, \u03b32)\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _, _; iFrame.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "--------------------------------------\u2217\n\u231c(0 + 0)%Z = 0\u231d\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n    "
      },
      {
        "_type": "sentence",
        "contents": "iPureIntro; auto.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n\"Hinv\" : inv N (bank_inv (\u03b31, \u03b32))\n--------------------------------------\u2217\nWP let: \"lk_b\" := lk_b in\n   (lk_a, #a_ref, (\"lk_b\", #b_ref)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u2200 b : val, is_bank b -\u2217 \u03a6 b\n\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n\"Hinv\" : inv N (bank_inv (\u03b31, \u03b32))\n--------------------------------------\u2217\n\u03a6 (lk_a, #a_ref, (lk_b, #b_ref))%V\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iApply \"H\u03a6\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n\"Hinv\" : inv N (bank_inv (\u03b31, \u03b32))\n--------------------------------------\u2217\nis_bank (lk_a, #a_ref, (lk_b, #b_ref))\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iExists _, _, (\u03b31,\u03b32); iFrame.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\n\u231c(lk_a, #a_ref, (lk_b, #b_ref))%V = (?Goal, ?Goal0)%V\u231d\n\u2217 is_account ?Goal (\u03b31, \u03b32).1\n  \u2217 is_account ?Goal0 (\u03b31, \u03b32).2\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iSplit; first eauto.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\nis_account (lk_a, #a_ref) (\u03b31, \u03b32).1\n\u2217 is_account (lk_b, #b_ref) (\u03b31, \u03b32).2\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "simpl.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\nis_account (lk_a, #a_ref) \u03b31\n\u2217 is_account (lk_b, #b_ref) \u03b32\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iSplitL \"Hlk1\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n--------------------------------------\u2217\nis_account (lk_a, #a_ref) \u03b31\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\nis_account (lk_b, #b_ref) \u03b32\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "-",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3lk1 lk_a (account_inv \u03b31 a_ref)\n--------------------------------------\u2217\nis_account (lk_a, #a_ref) \u03b31\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; eauto with iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "-",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk2\" : is_lock \u03b3lk2 lk_b (account_inv \u03b32 b_ref)\n--------------------------------------\u2217\nis_account (lk_b, #b_ref) \u03b32\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "a_ref",
                  "b_ref"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b31"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_a"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk1",
                  "\u03b32"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk_b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3lk2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; eauto with iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Theorem wp_transfer b (amt: Z) :\n  {{{ is_bank b }}}\n    transfer b #amt\n  {{{ RET #(); True }}}.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ is_bank b }}}\n  transfer b #amt\n{{{ RET #(); True }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ is_bank b }}}\n  transfer b #amt\n{{{ RET #(); True }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (\u03a6) \"#Hb H\u03a6\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #())\n--------------------------------------\u2217\nWP transfer b #amt {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  (* Breaking apart the above definitions is really quite\n  painful. I have written better infrastructure for this but it\n  isn't upstream in Iris (yet!) *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hb\" as (acct1 acct2 \u03b3 ->) \"(Hacct1&Hacct2&Hinv)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hacct1\" : is_account acct1 \u03b3.1\n\"Hacct2\" : is_account acct2 \u03b3.2\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #())\n--------------------------------------\u2217\nWP transfer (acct1, acct2)%V #amt {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "acct1",
                  "acct2"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hacct1\" as (bal_ref1 lk1 ->) \"Hlk\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk\" : \u2203 \u03b3l : gname,\n          is_lock \u03b3l lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hacct2\" : is_account acct2 \u03b3.2\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #())\n--------------------------------------\u2217\nWP transfer (lk1, #bal_ref1, acct2)%V #amt\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "acct2"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hlk\" as (\u03b3l1) \"Hlk1\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hacct2\" : is_account acct2 \u03b3.2\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #())\n--------------------------------------\u2217\nWP transfer (lk1, #bal_ref1, acct2)%V #amt\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "acct2"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hacct2\" as (bal_ref2 lk ->) \"Hlk\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk\" : \u2203 \u03b3l : gname,\n          is_lock \u03b3l lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #())\n--------------------------------------\u2217\nWP transfer (lk1, #bal_ref1, (lk, #bal_ref2))%V #amt\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hlk\" as (\u03b3l2) \"Hlk2\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #())\n--------------------------------------\u2217\nWP transfer (lk1, #bal_ref1, (lk, #bal_ref2))%V #amt\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_rec.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\nWP let: \"amt\" := #amt in\n   let: \"a\" := Fst (lk1, #bal_ref1, (lk, #bal_ref2))%V in\n   let: \"b\" := Snd (lk1, #bal_ref1, (lk, #bal_ref2))%V in\n   acquire (Fst \"a\");;\n   acquire (Fst \"b\");;\n   Snd \"a\" <- ! (Snd \"a\") - \"amt\";;\n   Snd \"b\" <- ! (Snd \"b\") + \"amt\";;\n   release (Fst \"b\");; release (Fst \"a\");; #()\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\nWP acquire lk1;;\n   acquire (Fst (lk, #bal_ref2)%V);;\n   Snd (lk1, #bal_ref1)%V <-\n   ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n   Snd (lk, #bal_ref2)%V <-\n   ! (Snd (lk, #bal_ref2)%V) + #amt;;\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; #() \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (acquire_spec with \"Hlk1\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\nlocked \u03b3l1 \u2217 account_inv \u03b3.1 bal_ref1\n-\u2217 WP #();;\n      acquire (Fst (lk, #bal_ref2)%V);;\n      Snd (lk1, #bal_ref1)%V <-\n      ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n      Snd (lk, #bal_ref2)%V <-\n      ! (Snd (lk, #bal_ref2)%V) + #amt;;\n      release (Fst (lk, #bal_ref2)%V);;\n      release (Fst (lk1, #bal_ref1)%V);; #()\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"(Hlocked1&Haccount1)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Haccount1\" : account_inv \u03b3.1 bal_ref1\n--------------------------------------\u2217\nWP #();;\n   acquire (Fst (lk, #bal_ref2)%V);;\n   Snd (lk1, #bal_ref1)%V <-\n   ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n   Snd (lk, #bal_ref2)%V <-\n   ! (Snd (lk, #bal_ref2)%V) + #amt;;\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; #() \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (acquire_spec with \"Hlk2\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Haccount1\" : account_inv \u03b3.1 bal_ref1\n--------------------------------------\u2217\nlocked \u03b3l2 \u2217 account_inv \u03b3.2 bal_ref2\n-\u2217 WP #();;\n      Snd (lk1, #bal_ref1)%V <-\n      ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n      Snd (lk, #bal_ref2)%V <-\n      ! (Snd (lk, #bal_ref2)%V) + #amt;;\n      release (Fst (lk, #bal_ref2)%V);;\n      release (Fst (lk1, #bal_ref1)%V);; #()\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"(Hlocked2&Haccount2)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Haccount1\" : account_inv \u03b3.1 bal_ref1\n\"Hlocked2\" : locked \u03b3l2\n\"Haccount2\" : account_inv \u03b3.2 bal_ref2\n--------------------------------------\u2217\nWP #();;\n   Snd (lk1, #bal_ref1)%V <-\n   ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n   Snd (lk, #bal_ref2)%V <-\n   ! (Snd (lk, #bal_ref2)%V) + #amt;;\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; #() \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Haccount1\" as (bal1) \"(Hbal1&Hown1)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Haccount2\" : account_inv \u03b3.2 bal_ref2\n--------------------------------------\u2217\nWP #();;\n   Snd (lk1, #bal_ref1)%V <-\n   ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n   Snd (lk, #bal_ref2)%V <-\n   ! (Snd (lk, #bal_ref2)%V) + #amt;;\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; #() \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Haccount2\" as (bal2) \"(Hbal2&Hown2)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP #();;\n   Snd (lk1, #bal_ref1)%V <-\n   ! (Snd (lk1, #bal_ref1)%V) - #amt;;\n   Snd (lk, #bal_ref2)%V <-\n   ! (Snd (lk, #bal_ref2)%V) + #amt;;\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; #() \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "text",
        "contents": "(* this steps through the critical section *)\n"
      },
      {
        "_type": "sentence",
        "contents": "wp_pures; wp_load; wp_pures; wp_store; wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP Snd (lk, #bal_ref2)%V <- ! #bal_ref2 + #amt;;\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; #() \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "wp_pures; wp_load; wp_pures; wp_store; wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP release lk;; release (Fst (lk1, #bal_ref1)%V);; #()\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "rewrite -fupd_wp.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\n|={\u22a4}=> WP release lk;;\n           release (Fst (lk1, #bal_ref1)%V);; #()\n        {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* we need to do this for iInv to work *)\n"
      },
      {
        "_type": "sentence",
        "contents": "iInv \"Hinv\" as (bal1' bal2') \">(H\u03b31&H\u03b32&%)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1')\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2')\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #() {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2",
                  "bal1'",
                  "bal2'"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1' + bal2' = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)\n(* we use the agreement and update theorems above for these\nghost variables *)\n"
      },
      {
        "_type": "sentence",
        "contents": "iDestruct (ghost_var_agree with \"H\u03b31 [$]\") as %->.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2')\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #() {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2",
                  "bal2'"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2' = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "iDestruct (ghost_var_agree with \"H\u03b32 [$]\") as %->.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #() {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "iMod (ghost_var_update (bal1-amt)\n        with \"H\u03b31 Hown1\") as \"(H\u03b31&Hown1)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE (bal1 - amt))\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #() {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "iMod (ghost_var_update (bal2+amt)\n        with \"H\u03b32 Hown2\") as \"(H\u03b32&Hown2)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE (bal1 - amt))\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n\"H\u03b32\" : own \u03b3.2 (\u25cfE (bal2 + amt))\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #() {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "iModIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE (bal1 - amt))\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n\"H\u03b32\" : own \u03b3.2 (\u25cfE (bal2 + amt))\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\n\u25b7 bank_inv \u03b3\n\u2217 (|={\u22a4}=> WP release lk;;\n              release (Fst (lk1, #bal_ref1)%V);; #()\n           {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n(* we can't just modify ghost state however we want - to\ncontinue, `iInv` added `bank_inv` to our goal to prove,\nrequiring us to restore the invariant *)\n"
      },
      {
        "_type": "sentence",
        "contents": "iSplitL \"H\u03b31 H\u03b32\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03b31\" : own \u03b3.1 (\u25cfE (bal1 - amt))\n\"H\u03b32\" : own \u03b3.2 (\u25cfE (bal2 + amt))\n--------------------------------------\u2217\n\u25b7 bank_inv \u03b3\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\n|={\u22a4}=> WP release lk;;\n           release (Fst (lk1, #bal_ref1)%V);; #()\n        {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03b31\" : own \u03b3.1 (\u25cfE (bal1 - amt))\n\"H\u03b32\" : own \u03b3.2 (\u25cfE (bal2 + amt))\n--------------------------------------\u2217\n\u25b7 bank_inv \u03b3\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iNext.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03b31\" : own \u03b3.1 (\u25cfE (bal1 - amt))\n\"H\u03b32\" : own \u03b3.2 (\u25cfE (bal2 + amt))\n--------------------------------------\u2217\nbank_inv \u03b3\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _, _; iFrame.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\u231c(bal1 - amt + (bal2 + amt))%Z = 0\u231d\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iPureIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "bal1 - amt + (bal2 + amt) = 0",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "lia.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\n|={\u22a4}=> WP release lk;;\n           release (Fst (lk1, #bal_ref1)%V);; #()\n        {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "iModIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\nWP release lk;; release (Fst (lk1, #bal_ref1)%V);; #()\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      }
    ],
    [
      {
        "_type": "text",
        "contents": "  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (release_spec with \"[$Hlk2 $Hlocked2 Hbal2 Hown2]\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\naccount_inv \u03b3.2 bal_ref2\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n--------------------------------------\u2217\nTrue\n-\u2217 WP #();; release (Fst (lk1, #bal_ref1)%V);; #()\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal2\" : bal_ref2 \u21a6 #(bal2 + amt)\n\"Hown2\" : own \u03b3.2 (\u25efE (bal2 + amt))\n--------------------------------------\u2217\naccount_inv \u03b3.2 bal_ref2\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n--------------------------------------\u2217\nTrue\n-\u2217 WP #();; release (Fst (lk1, #bal_ref1)%V);; #()\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"_\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n--------------------------------------\u2217\nWP #();; release (Fst (lk1, #bal_ref1)%V);; #()\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (release_spec with \"[$Hlk1 $Hlocked1 Hbal1 Hown1]\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n--------------------------------------\u2217\naccount_inv \u03b3.1 bal_ref1\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\nTrue -\u2217 WP #();; #() {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal1\" : bal_ref1 \u21a6 #(bal1 - amt)\n\"Hown1\" : own \u03b3.1 (\u25efE (bal1 - amt))\n--------------------------------------\u2217\naccount_inv \u03b3.1 bal_ref1\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\nTrue -\u2217 WP #();; #() {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"_\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\nWP #();; #() {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #()\n--------------------------------------\u2217\n\u03a6 #()\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "amt"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "by iApply \"H\u03a6\".",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Theorem wp_check_consistency b :\n  {{{ is_bank b }}}\n     check_consistency b\n  {{{ RET #true; True }}}.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ is_bank b }}}\n  check_consistency b\n{{{ RET #true; True }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ is_bank b }}}\n  check_consistency b\n{{{ RET #true; True }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  (* most of this proof is the same: open everything up and\n  acquire the locks, then destruct the lock invariants *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (\u03a6) \"#Hb H\u03a6\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP check_consistency b {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hb\" as (acct1 acct2 \u03b3 ->) \"(Hacct1&Hacct2&Hinv)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hacct1\" : is_account acct1 \u03b3.1\n\"Hacct2\" : is_account acct2 \u03b3.2\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP check_consistency (acct1, acct2)%V {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "acct1",
                  "acct2"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hacct1\" as (bal_ref1 lk1 ->) \"Hlk\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk\" : \u2203 \u03b3l : gname,\n          is_lock \u03b3l lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hacct2\" : is_account acct2 \u03b3.2\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP check_consistency (lk1, #bal_ref1, acct2)%V\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "acct2"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hlk\" as (\u03b3l1) \"Hlk1\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hacct2\" : is_account acct2 \u03b3.2\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP check_consistency (lk1, #bal_ref1, acct2)%V\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "acct2"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hacct2\" as (bal_ref2 lk ->) \"Hlk\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk\" : \u2203 \u03b3l : gname,\n          is_lock \u03b3l lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP check_consistency\n     (lk1, #bal_ref1, (lk, #bal_ref2))%V \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Hlk\" as (\u03b3l2) \"Hlk2\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP check_consistency\n     (lk1, #bal_ref1, (lk, #bal_ref2))%V \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_rec.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP let: \"a\" := Fst (lk1, #bal_ref1, (lk, #bal_ref2))%V in\n   let: \"b\" := Snd (lk1, #bal_ref1, (lk, #bal_ref2))%V in\n   acquire (Fst \"a\");;\n   acquire (Fst \"b\");;\n   let: \"a_bal\" := ! (Snd \"a\") in\n   let: \"b_bal\" := ! (Snd \"b\") in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst \"b\");; release (Fst \"a\");; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP acquire lk1;;\n   acquire (Fst (lk, #bal_ref2)%V);;\n   let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n   let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (acquire_spec with \"Hlk1\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nlocked \u03b3l1 \u2217 account_inv \u03b3.1 bal_ref1\n-\u2217 WP #();;\n      acquire (Fst (lk, #bal_ref2)%V);;\n      let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n      let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n      let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n      release (Fst (lk, #bal_ref2)%V);;\n      release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"(Hlocked1&Haccount1)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Haccount1\" : account_inv \u03b3.1 bal_ref1\n--------------------------------------\u2217\nWP #();;\n   acquire (Fst (lk, #bal_ref2)%V);;\n   let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n   let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (acquire_spec with \"Hlk2\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Haccount1\" : account_inv \u03b3.1 bal_ref1\n--------------------------------------\u2217\nlocked \u03b3l2 \u2217 account_inv \u03b3.2 bal_ref2\n-\u2217 WP #();;\n      let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n      let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n      let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n      release (Fst (lk, #bal_ref2)%V);;\n      release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"(Hlocked2&Haccount2)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Haccount1\" : account_inv \u03b3.1 bal_ref1\n\"Hlocked2\" : locked \u03b3l2\n\"Haccount2\" : account_inv \u03b3.2 bal_ref2\n--------------------------------------\u2217\nWP #();;\n   let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n   let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Haccount1\" as (bal1) \"(Hbal1&Hown1)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Haccount2\" : account_inv \u03b3.2 bal_ref2\n--------------------------------------\u2217\nWP #();;\n   let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n   let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct \"Haccount2\" as (bal2) \"(Hbal2&Hown2)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP #();;\n   let: \"a_bal\" := ! (Snd (lk1, #bal_ref1)%V) in\n   let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n\n  (* the critical section is easy *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures; wp_load.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP let: \"a_bal\" := #bal1 in\n   let: \"b_bal\" := ! (Snd (lk, #bal_ref2)%V) in\n   let: \"ok\" := \"a_bal\" + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures; wp_load.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP let: \"b_bal\" := #bal2 in\n   let: \"ok\" := #bal1 + \"b_bal\" = #0 in\n   release (Fst (lk, #bal_ref2)%V);;\n   release (Fst (lk1, #bal_ref1)%V);; \"ok\"\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP release lk;;\n   release (Fst (lk1, #bal_ref1)%V);;\n   #(bool_decide (#(bal1 + bal2) = #0)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n\n  (* Now we need to prove something about our return value using\n  information derived from the invariant. As before we'll open\n  the invariant, but this time we don't need to modify anything,\n  just extract a pure fact. *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "rewrite -fupd_wp.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\n|={\u22a4}=> WP release lk;;\n           release (Fst (lk1, #bal_ref1)%V);;\n           #(bool_decide (#(bal1 + bal2) = #0))\n        {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  (* the [%] here is the pure fact, actually *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "iInv N as (bal1' bal2') \">(H\u03b31 & H\u03b32 & %)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1')\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2')\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #(bool_decide (#(bal1 + bal2) = #0))\n                {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2",
                  "bal1'",
                  "bal2'"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1' + bal2' = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct (ghost_var_agree with \"H\u03b31 [$]\") as %->.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2')\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #(bool_decide (#(bal1 + bal2) = #0))\n                {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2",
                  "bal2'"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2' = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iDestruct (ghost_var_agree with \"H\u03b32 [$]\") as %->.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n--------------------------------------\u2217\n|={\u22a4 \u2216 \u2191N}=> \u25b7 bank_inv \u03b3\n             \u2217 (|={\u22a4}=> \n                WP release lk;;\n                   release (Fst (lk1, #bal_ref1)%V);;\n                   #(bool_decide (#(bal1 + bal2) = #0))\n                {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iModIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n--------------------------------------\u2217\n\u25b7 bank_inv \u03b3\n\u2217 (|={\u22a4}=> WP release lk;;\n              release (Fst (lk1, #bal_ref1)%V);;\n              #(bool_decide (#(bal1 + bal2) = #0))\n           {{ v, \u03a6 v }})\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iSplitL \"H\u03b31 H\u03b32\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n--------------------------------------\u2217\n\u25b7 bank_inv \u03b3\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\n|={\u22a4}=> WP release lk;;\n           release (Fst (lk1, #bal_ref1)%V);;\n           #(bool_decide (#(bal1 + bal2) = #0))\n        {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n--------------------------------------\u2217\n\u25b7 bank_inv \u03b3\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iNext.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03b31\" : own \u03b3.1 (\u25cfE bal1)\n\"H\u03b32\" : own \u03b3.2 (\u25cfE bal2)\n--------------------------------------\u2217\nbank_inv \u03b3\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _, _; iFrame.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\u231c(bal1 + bal2)%Z = 0\u231d\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n    "
      },
      {
        "_type": "sentence",
        "contents": "iPureIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "bal1 + bal2 = 0",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n    "
      },
      {
        "_type": "sentence",
        "contents": "lia.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\n|={\u22a4}=> WP release lk;;\n           release (Fst (lk1, #bal_ref1)%V);;\n           #(bool_decide (#(bal1 + bal2) = #0))\n        {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iModIntro.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n\"Hlocked2\" : locked \u03b3l2\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\nWP release lk;;\n   release (Fst (lk1, #bal_ref1)%V);;\n   #(bool_decide (#(bal1 + bal2) = #0)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (release_spec with \"[$Hlk2 $Hlocked2 Hbal2 Hown2]\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\naccount_inv \u03b3.2 bal_ref2\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n--------------------------------------\u2217\nTrue\n-\u2217 WP #();;\n      release (Fst (lk1, #bal_ref1)%V);;\n      #(bool_decide (#(bal1 + bal2) = #0))\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal2\" : bal_ref2 \u21a6 #bal2\n\"Hown2\" : own \u03b3.2 (\u25efE bal2)\n--------------------------------------\u2217\naccount_inv \u03b3.2 bal_ref2\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n--------------------------------------\u2217\nTrue\n-\u2217 WP #();;\n      release (Fst (lk1, #bal_ref1)%V);;\n      #(bool_decide (#(bal1 + bal2) = #0))\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"_\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n\"Hlocked1\" : locked \u03b3l1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n--------------------------------------\u2217\nWP #();;\n   release (Fst (lk1, #bal_ref1)%V);;\n   #(bool_decide (#(bal1 + bal2) = #0)) \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (release_spec with \"[$Hlk1 $Hlocked1 Hbal1 Hown1]\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n--------------------------------------\u2217\naccount_inv \u03b3.1 bal_ref1\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nTrue\n-\u2217 WP #();; #(bool_decide (#(bal1 + bal2) = #0))\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "{",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"Hbal1\" : bal_ref1 \u21a6 #bal1\n\"Hown1\" : own \u03b3.1 (\u25efE bal1)\n--------------------------------------\u2217\naccount_inv \u03b3.1 bal_ref1\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "iExists _; iFrame.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "}",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nTrue\n-\u2217 WP #();; #(bool_decide (#(bal1 + bal2) = #0))\n   {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"_\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP #();; #(bool_decide (#(bal1 + bal2) = #0))\n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_pures.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\n\u03a6 #(bool_decide (#(bal1 + bal2) = #0))\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)\n  (* the calculation always returns true because of the H\n  hypothesis we got from the invariant *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "rewrite bool_decide_eq_true_2; last congruence.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hlk1\" : is_lock \u03b3l1 lk1 (account_inv \u03b3.1 bal_ref1)\n\"Hlk2\" : is_lock \u03b3l2 lk (account_inv \u03b3.2 bal_ref2)\n\"Hinv\" : inv N (bank_inv \u03b3)\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\n\u03a6 #true\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3"
                ],
                "body": null,
                "type": "(gname * gname)%type"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref1"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk1"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l1"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal_ref2"
                ],
                "body": null,
                "type": "loc"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lk"
                ],
                "body": null,
                "type": "val"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03b3l2"
                ],
                "body": null,
                "type": "gname"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "bal1",
                  "bal2"
                ],
                "body": null,
                "type": "Z"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "H"
                ],
                "body": null,
                "type": "bal1 + bal2 = 0"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "by iApply \"H\u03a6\".",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Theorem wp_demo_check_consistency :\n  {{{ True }}}\n    demo_check_consistency #()\n  {{{ RET #true; True }}}.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ True }}}\n  demo_check_consistency #()\n{{{ RET #true; True }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof using All.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "{{{ True }}}\n  demo_check_consistency #()\n{{{ RET #true; True }}}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (\u03a6) \"_ H\u03a6\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : \u25b7 (True -\u2217 \u03a6 #true)\n--------------------------------------\u2217\nWP demo_check_consistency #() {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_rec.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP let: \"bank\" := new_bank #() in\n   Fork (transfer \"bank\" #5);;\n   check_consistency \"bank\" \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply wp_new_bank; first auto.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\n\u2200 b : val,\n  is_bank b\n  -\u2217 WP let: \"bank\" := b in\n        Fork (transfer \"bank\" #5);;\n        check_consistency \"bank\" \n     {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  (* we use `#Hb` to put the newly created `is_bank` in the\n  \"persistent context\" in the Iris Proof Mode - these are\n  persistent facts and thus are available even when we need to\n  split to prove a separating conjunction *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros (b) \"#Hb\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP let: \"bank\" := b in\n   Fork (transfer \"bank\" #5);;\n   check_consistency \"bank\" \n{{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "text",
        "contents": "  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply wp_fork.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\nWP transfer b #5 {{ _, True }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          },
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP #();; check_consistency b {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "-",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\nWP transfer b #5 {{ _, True }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (wp_transfer with \"Hb\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\nTrue -\u2217 True\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n    "
      },
      {
        "_type": "sentence",
        "contents": "auto.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "-",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nWP #();; check_consistency b {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* `check_consistency` always returns true, assuming\n    `is_bank` *)\n    "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (wp_check_consistency with \"Hb\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\nTrue -\u2217 \u03a6 #true\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n    "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"_\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hb\" : is_bank b\n--------------------------------------\u25a1\n\"H\u03a6\" : True -\u2217 \u03a6 #true\n--------------------------------------\u2217\n\u03a6 #true\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iPropI \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "b"
                ],
                "body": null,
                "type": "val"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n    "
      },
      {
        "_type": "sentence",
        "contents": "by iApply \"H\u03a6\".",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      }
    ],
    [
      {
        "_type": "sentence",
        "contents": "Theorem wp_fork_alt (P Q: iProp \u03a3) (e e': expr) :\n  (P -\u2217 WP e {{ \u03bb _, True }}) -\u2217\n  \u2200 (\u03a6: val \u2192 iProp \u03a3), (Q -\u2217 WP e' {{ \u03a6 }}) -\u2217\n  (P \u2217 Q -\u2217 WP Fork e;; e' {{ \u03a6 }}).",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "(P -\u2217 WP e {{ _, True }})\n-\u2217 \u2200 \u03a6 : val \u2192 iProp \u03a3,\n     (Q -\u2217 WP e' {{ v, \u03a6 v }})\n     -\u2217 P \u2217 Q -\u2217 WP Fork e;; e' {{ v, \u03a6 v }}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "P",
                  "Q"
                ],
                "body": null,
                "type": "iProp \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "e",
                  "e'"
                ],
                "body": null,
                "type": "expr"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Proof.",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "(P -\u2217 WP e {{ _, True }})\n-\u2217 \u2200 \u03a6 : val \u2192 iProp \u03a3,\n     (Q -\u2217 WP e' {{ v, \u03a6 v }})\n     -\u2217 P \u2217 Q -\u2217 WP Fork e;; e' {{ v, \u03a6 v }}",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "P",
                  "Q"
                ],
                "body": null,
                "type": "iProp \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "e",
                  "e'"
                ],
                "body": null,
                "type": "expr"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "iIntros \"Hwp1\" (\u03a6) \"Hwp2 (HP&HQ)\".",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hwp1\" : P -\u2217 WP e {{ _, True }}\n\"Hwp2\" : Q -\u2217 WP e' {{ v, \u03a6 v }}\n\"HP\" : P\n\"HQ\" : Q\n--------------------------------------\u2217\nWP Fork e;; e' {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "P",
                  "Q"
                ],
                "body": null,
                "type": "iProp \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "e",
                  "e'"
                ],
                "body": null,
                "type": "expr"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iProp \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": " (* .unfold *)"
      }
    ],
    [
      {
        "_type": "text",
        "contents": "  (* the details of the rest of this proof aren't important *)\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (wp_fork with \"(Hwp1 HP)\").",
        "responses": [],
        "goals": [
          {
            "_type": "goal",
            "name": null,
            "conclusion": "\"Hwp2\" : Q -\u2217 WP e' {{ v, \u03a6 v }}\n\"HQ\" : Q\n--------------------------------------\u2217\nWP #();; e' {{ v, \u03a6 v }}\n",
            "hypotheses": [
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a3"
                ],
                "body": null,
                "type": "gFunctors"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "heapG0"
                ],
                "body": null,
                "type": "heapG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "lockG0"
                ],
                "body": null,
                "type": "lockG \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "inG0"
                ],
                "body": null,
                "type": "inG \u03a3 (ghostR ZO)"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "N"
                ],
                "body": "nroot.@\"bank\"",
                "type": "namespace"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "P",
                  "Q"
                ],
                "body": null,
                "type": "iProp \u03a3"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "e",
                  "e'"
                ],
                "body": null,
                "type": "expr"
              },
              {
                "_type": "hypothesis",
                "names": [
                  "\u03a6"
                ],
                "body": null,
                "type": "val \u2192 iProp \u03a3"
              }
            ]
          }
        ]
      },
      {
        "_type": "text",
        "contents": "\n  "
      },
      {
        "_type": "sentence",
        "contents": "wp_apply (\"Hwp2\" with \"HQ\").",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n"
      },
      {
        "_type": "sentence",
        "contents": "Qed.",
        "responses": [],
        "goals": []
      },
      {
        "_type": "text",
        "contents": "\n\n"
      },
      {
        "_type": "sentence",
        "contents": "End heap.",
        "responses": [],
        "goals": []
      }
    ]
  ]
}